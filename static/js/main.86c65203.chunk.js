(this.webpackJsonpcrud=this.webpackJsonpcrud||[]).push([[0],{15:function(e,t,a){e.exports={App:"App_App__316XG",container:"App_container__J3Nd6",container2:"App_container2__37H6g",toggles:"App_toggles__35AY9"}},21:function(e,t,a){},22:function(e,t,a){e.exports={toggles:"Toggles_toggles__1E8CO"}},30:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(8),r=a.n(c),i=(a(30),a(11)),o=a(12),l=a(14),d=a(13),u=a(15),h=a.n(u),j=a(2),f=a(4),b="https://react-php-crud.herokuapp.com/",p=a(7),_=a(9),m=a.n(_),g=a(0),O=function(e){var t=e.qual,a=!1;return e.counter>0&&(a=!0),Object(g.jsx)("div",{className:m.a.qual,style:a?{borderTop:"1px solid lightgrey"}:null,children:t})},x=function(e){var t=e.counter,a=e.user,n=e.toggleForm,s=Object(p.c)(),c=function(){window.confirm("Are you sure you want to delete?")&&s(function(e){return function(t){f.a.loading("Deleting information from database..."),t({type:"DELETE_USER"}),fetch("".concat(b,"delete_user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t({type:"DELETE_USER_SUCCESS",payload:e}),f.a.success("Successfully Deleted"),t({type:"FETCH_USER_START"}),fetch("".concat(b,"get_users.php")).then((function(e){return e.json()})).then((function(e){for(var a=[],n=0;n<e.fm.length;n++){a.push(Object(j.a)(Object(j.a)({},e.fm[n]),{},{qualification:[]}));for(var s=0;s<e.qual.length;s++)e.fm[n].fm_id===e.qual[s].fm_id&&a[n].qualification.push(e.qual[s])}t({type:"FETCH_USER_SUCCESS",payload:a})})).catch((function(e){t({type:"FETCH_USER_FAILED",payload:e}),f.a.error("Auto Fetching Failed. Refreshing Now..."),window.location.reload()}))})).catch((function(e){f.a.error("Deleting User Failed"),f.a.info(e.message),t({type:"DELETE_USER_FAILED",payload:e})}))}}(a))},r=function(){var e;s((e=a,console.log(e),{type:"EDIT_USER",payload:e})),n()};return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:t}),Object(g.jsx)("td",{children:a.fm_name}),Object(g.jsx)("td",{children:a.fm_address}),Object(g.jsx)("td",{children:a.fm_designation}),Object(g.jsxs)("td",{children:["Rs. ",a.fm_salary]}),Object(g.jsx)("td",{children:a.qualification.map((function(e,t){return Object(g.jsx)(O,{counter:t,qual:e.degree_tittle},t)}))}),Object(g.jsx)("td",{children:a.qualification.map((function(e,t){return Object(g.jsx)(O,{counter:t,qual:e.year_of_passing},t)}))}),Object(g.jsx)("td",{children:a.qualification.map((function(e,t){return Object(g.jsx)(O,{counter:t,qual:e.institute_attended},t)}))}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:m.a.btn,children:[Object(g.jsx)("i",{className:"fa fa-pencil",onClick:function(){return r()}}),Object(g.jsx)("i",{className:"fa fa-trash",onClick:function(){return c()}})]})})]})},y=(a(25),a(35),function(){return Object(g.jsx)("div",{className:"SpinnerOverlay",children:Object(g.jsx)("div",{className:"SpinnerContainer"})})}),S=function(e){var t=e.users,a=e.toggleForm,n=e.isLoading;return Object(g.jsxs)("div",{className:m.a.body,children:[Object(g.jsxs)("table",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"#"}),Object(g.jsx)("th",{children:"Name"}),Object(g.jsx)("th",{children:"Address"}),Object(g.jsx)("th",{children:"Designation"}),Object(g.jsx)("th",{children:"Salary"}),Object(g.jsx)("th",{children:"Degree_Title"}),Object(g.jsx)("th",{children:"Year_of_Passing"}),Object(g.jsx)("th",{children:"Institute_Attended"}),Object(g.jsx)("th",{children:"Actions"})]}),t.map((function(e,n){return Object(g.jsx)(x,{user:t[n],counter:n+1,toggleForm:a},n)}))]}),n?Object(g.jsx)(y,{}):null]})},C=a(20),E=a(6),v=(a(21),a(19)),U=a.n(v),D=function(e){var t=e.qual,a=e.handleQual,n=e.index,s=e.handleRemoved;return Object(g.jsxs)("div",{className:"qual".concat(t.q_id),children:[n>0?Object(g.jsxs)("div",{className:"addless",children:[Object(g.jsx)("span",{className:"span",style:{color:"lightgrey"}}),Object(g.jsx)("span",{className:"span3",onClick:function(){return s(n,t.q_id)},children:"Remove"}),Object(g.jsx)("hr",{className:"hr"})]}):null,Object(g.jsxs)("div",{className:"row1",children:[Object(g.jsxs)("label",{htmlFor:"institute",children:[Object(g.jsx)("i",{className:"fa fa-institution"})," Institute Attended"]}),Object(g.jsx)("input",{type:"text",id:"institute",name:"institute_attended",placeholder:"Institute name ...",value:t.institute_attended,onChange:function(e){return a(e,n)},required:!0})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"col-50",children:[Object(g.jsxs)("label",{htmlFor:"egree",children:[Object(g.jsx)("i",{className:"fa fa-graduation-cap","aria-hidden":"true"})," Degree Title"]}),Object(g.jsx)("input",{type:"text",id:"degree",name:"degree_tittle",placeholder:"Degree title here ...",value:t.degree_tittle,onChange:function(e){return a(e,n)},required:!0})]}),Object(g.jsxs)("div",{className:"col-50",children:[Object(g.jsxs)("label",{htmlFor:"year",children:[Object(g.jsx)("i",{className:"fa fa-calendar","aria-hidden":"true"})," Year of Passing"]}),Object(g.jsx)("input",{type:"number",id:"year",name:"year_of_passing",placeholder:"Year only ...",value:t.year_of_passing,onChange:function(e){return a(e,n)},required:!0})]})]})]})},q={q_id:"",institute_attended:"",degree_tittle:"",year_of_passing:""},N={fm_name:"",fm_salary:"",fm_address:"",fm_designation:"",qualification:[q],counter:1,removedItem:[]},A=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(j.a)(Object(j.a)({},n.state),{},Object(E.a)({},e.target.name,e.target.value)))},n.handleQual=function(e,t){var a;!n.state.qualification[t].q_id&&n.props.oldUser?n.setState(U()(n.state,{qualification:Object(E.a)({},t,{$set:Object(j.a)(Object(j.a)({},n.state.qualification[t]),{},(a={},Object(E.a)(a,e.target.name,e.target.value),Object(E.a)(a,"q_id",String(parseInt(n.state.qualification[t-1].q_id)+1)),a))})})):n.setState(U()(n.state,{qualification:Object(E.a)({},t,{$set:Object(j.a)(Object(j.a)({},n.state.qualification[t]),{},Object(E.a)({},e.target.name,e.target.value))})}))},n.handleSubmit=function(e){e.preventDefault(),n.props.oldUser?n.props.updateUser(n.state):n.props.addUser(n.state),console.log(n.props.success)},n.cancelUpdate=function(){n.props.oldUser?(n.props.cancelUpdate(),n.props.toggleDatabase()):n.setState(N)},n.addCounter=function(){n.setState((function(e){return{qualification:[].concat(Object(C.a)(e.qualification),[q])}}))},n.handleRemoved=function(e,t){n.state.removedItem.push(t),console.log(n.state.removedItem);var a=Object(C.a)(n.state.qualification);-1!==e&&(a.splice(e,1),n.setState({qualification:a}))},n.props.oldUser?n.state=Object(j.a)(Object(j.a)({},n.props.oldUser),{},{counter:n.props.oldUser.qualification.length,removedItem:[]}):n.state=N,n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.props.success&&(this.props.toggleDatabase(),this.setState(N)),Object(g.jsxs)("div",{className:"container",children:[Object(g.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"col-50",children:[Object(g.jsx)("h3",{children:"Personal Information"}),Object(g.jsxs)("label",{htmlFor:"name",children:[Object(g.jsx)("i",{className:"fa fa-user"})," Full Name"]}),Object(g.jsx)("input",{type:"text",id:"name",name:"fm_name",placeholder:"Your name here ...",value:this.state.fm_name,onChange:this.handleChange,required:!0}),Object(g.jsxs)("label",{htmlFor:"address",children:[Object(g.jsx)("i",{className:"fa fa-address-card-o"})," Address"]}),Object(g.jsx)("input",{type:"text",id:"address",name:"fm_address",placeholder:"Your address here ...",value:this.state.fm_address,onChange:this.handleChange,required:!0}),Object(g.jsxs)("label",{htmlFor:"designation",children:[Object(g.jsx)("i",{className:"fa fa-briefcase"})," Designation"]}),Object(g.jsx)("input",{type:"text",id:"designation",name:"fm_designation",placeholder:"Your designation here ...",value:this.state.fm_designation,onChange:this.handleChange,required:!0}),Object(g.jsxs)("label",{htmlFor:"salary",children:[Object(g.jsx)("i",{className:"fa fa-usd","aria-hidden":"true"})," Salary"]}),Object(g.jsx)("input",{type:"number",id:"salary",name:"fm_salary",placeholder:"PKR",value:this.state.fm_salary,onChange:this.handleChange,required:!0})]}),Object(g.jsxs)("div",{className:"col-50 second",children:[Object(g.jsx)("div",{className:"qualification",children:Object(g.jsx)("h3",{children:"Qualification"})}),this.state.qualification.map((function(t,a){return Object(g.jsx)(D,{qual:t,handleRemoved:e.handleRemoved,handleQual:e.handleQual,index:a},a)})),Object(g.jsxs)("div",{className:"addmore",children:[Object(g.jsx)("span",{className:"span",style:{color:"lightgrey"},onClick:function(){return e.addCounter()},children:"\uff0b"}),Object(g.jsx)("span",{className:"span2",onClick:function(){return e.addCounter()},children:"Add More"}),Object(g.jsx)("hr",{className:"hr",onClick:function(){return e.addCounter()}})]})]})]}),Object(g.jsxs)("label",{className:"lastlabel",children:[Object(g.jsx)("input",{type:"checkbox",name:"sameadr",required:!0})," ",Object(g.jsx)("span",{children:"I hereby verified the above information is correct and verified as per Terms & Conditions of Faculty Directory of Multi University"})]}),Object(g.jsxs)("div",{className:"cancel",children:[Object(g.jsx)("input",{type:"submit",value:this.props.oldUser?"Update In database":"Save in database",className:"btn "}),Object(g.jsx)("button",{className:"cancelbtn",type:"button",onClick:function(){return e.cancelUpdate()},children:this.props.oldUser?"Cancel":"Clear All"})]})]}),this.props.isLoading?Object(g.jsx)(y,{}):null]})}}]),a}(s.a.Component),F=Object(p.b)(null,(function(e){return{addUser:function(t){return e(function(e){return function(t){f.a.loading("Adding information in database ..."),t({type:"ADD_USER_IN_DB_START"}),fetch("".concat(b,"add_user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){f.a.success("Successfully added in Database"),t({type:"ADD_USER_IN_DB_SUCCESS",payload:e}),fetch("".concat(b,"get_users.php")).then((function(e){return e.json()})).then((function(e){for(var a=[],n=0;n<e.fm.length;n++){a.push(Object(j.a)(Object(j.a)({},e.fm[n]),{},{qualification:[]}));for(var s=0;s<e.qual.length;s++)e.fm[n].fm_id===e.qual[s].fm_id&&a[n].qualification.push(e.qual[s])}t({type:"FETCH_USER_SUCCESS",payload:a})})).catch((function(e){t({type:"FETCH_USER_FAILED",payload:e}),f.a.error("Auto Fetching Failed. Refreshing Page..."),window.location.reload()}))})).catch((function(e){t({type:"ADD_USER_IN_DB_FAILED",payload:e}),f.a.error("Adding Data Failed"),f.a.info(e.message,20)}))}}(t))},updateUser:function(t){return e((a=t,function(e){f.a.loading("Updating informtion in database..."),e({type:"UPDATE_USER_START"}),fetch("".concat(b,"update_user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(t){console.log(t),e({type:"UPDATE_USER_SUCCESS",payload:t}),f.a.success("Information Updated"),e({type:"FETCH_USER_START"}),fetch("".concat(b,"get_users.php")).then((function(e){return e.json()})).then((function(t){for(var a=[],n=0;n<t.fm.length;n++){a.push(Object(j.a)(Object(j.a)({},t.fm[n]),{},{qualification:[]}));for(var s=0;s<t.qual.length;s++)t.fm[n].fm_id===t.qual[s].fm_id&&a[n].qualification.push(t.qual[s])}e({type:"FETCH_USER_SUCCESS",payload:a})})).catch((function(t){e({type:"FETCH_USER_FAILED",payload:t}),f.a.error("Auto Fetching Failed. Refreshing Now..."),window.location.reload()}))})).catch((function(t){f.a.error("Update Failed"),e({type:"UPDATE_USER_FAILED",payload:t})}))}));var a},cancelUpdate:function(){return e((f.a.info("Cancelled"),{type:"CANCEL_UPDATE"}))}}}))(A),T=a(22),R=a.n(T),L=function(e){var t=e.form,a=e.database,n=e.oldUser,s=e.toggleDatabase,c=e.toggleForm;return Object(g.jsxs)("div",{className:R.a.toggles,children:[Object(g.jsx)("button",{onClick:function(){return c()},style:t?{background:"linear-gradient(360deg, #BA54F5 0%, #E14ECA 100%)",color:"white"}:null,children:n?"Update Faculty Member":"Add Faculty Member"}),Object(g.jsx)("button",{onClick:function(){return s()},style:a?{background:"linear-gradient(360deg, #BA54F5 0%, #E14ECA 100%)",color:"white"}:null,children:"Database"})]})},I=a(5),w=a.n(I),B=function(e){var t=e.database,a=e.searchValue,n=e.onSearchChange,s=e.clearSearchValue,c=e.form;return Object(g.jsxs)("div",{children:[t?Object(g.jsxs)("div",{className:w.a.titlebar,children:[Object(g.jsx)("h5",{children:"Faculty Database "}),Object(g.jsxs)("div",{className:w.a.searchBox_fakeInput,children:[Object(g.jsx)("div",{className:w.a.searchBox_inputWrapper,children:Object(g.jsx)("input",{id:"myInput",type:"text",className:"".concat(w.a.form_control," ").concat(w.a.searchBox_input," ").concat(w.a.js_searchBox_input),value:a,onChange:n,placeholder:"Search"})}),Object(g.jsx)("div",{className:w.a.searchBox_clearWrapper,children:Object(g.jsx)("span",{style:a?{display:"block"}:{display:"none"},className:"".concat(w.a.searchBox_clear," ").concat(w.a.js_clearSearchBox),onClick:function(){return s()},children:Object(g.jsx)("i",{className:"fa fa-times-circle"})})})]})]}):null,c?Object(g.jsx)("div",{className:w.a.titlebar,children:Object(g.jsxs)("h5",{children:["Faculty Directory for Multi Universities \u2002",Object(g.jsxs)("span",{className:w.a.tooltip,children:[Object(g.jsx)("span",{className:w.a.tooltiptext,children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("h5",{children:"Instructions"}),Object(g.jsx)("li",{children:"All fields are mandatory."}),Object(g.jsx)("li",{children:"As Per given instructions Tables are in One To Many Relation"}),Object(g.jsx)("li",{children:"Thus, You can add more than one Qualification box, By clicking Add More"}),Object(g.jsx)("li",{children:"One Qualification Box field's are mandatory "}),Object(g.jsx)("li",{children:"You can Remove Specific Qualification field. Click on Edit and remove the field"}),Object(g.jsx)("li",{children:"Also, You can update even signle qualification field or you can delete one qualification field"})]})}),"\u24d8"]})]})}):null]})},k=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).toggleDatabase=function(){n.setState({database:!n.state.database,form:!1,searchValue:""})},n.toggleForm=function(){n.setState({database:!1,form:!n.state.form})},n.onSearchChange=function(e){n.setState({searchValue:e.target.value})},n.clearSearchValue=function(){n.setState({searchValue:""})},n.state={database:!1,form:!1,searchValue:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.getUser()}},{key:"render",value:function(){var e=this.state,t=e.form,a=e.database,n=e.searchValue,s=this.props,c=s.oldUser,r=s.users,i=s.isLoading,o=s.success,l=r.filter((function(e){return e.fm_name.toLowerCase().includes(n.toLowerCase())||e.fm_address.toLowerCase().includes(n.toLowerCase())||e.fm_designation.toLowerCase().includes(n.toLowerCase())||e.fm_salary.toLowerCase().includes(n.toLowerCase())||e.qualification.includes(n.toLowerCase())||e.qualification[0].degree_tittle.toLowerCase().includes(n.toLowerCase())||e.qualification[0].year_of_passing.toLowerCase().includes(n.toLowerCase())||e.qualification[0].institute_attended.toLowerCase().includes(n.toLowerCase())}));return Object(g.jsx)("div",{className:h.a.App,children:Object(g.jsxs)("div",{className:h.a.container,children:[Object(g.jsx)(L,{form:t,database:a,oldUser:c,toggleDatabase:this.toggleDatabase,toggleForm:this.toggleForm}),Object(g.jsxs)("div",{className:h.a.container2,children:[Object(g.jsx)(B,{database:a,form:t,searchValue:n,onSearchChange:this.onSearchChange,clearSearchValue:this.clearSearchValue}),a?Object(g.jsx)(S,{toggleForm:this.toggleForm,users:l,isLoading:i}):null,t?Object(g.jsx)(F,{oldUser:c,toggleDatabase:this.toggleDatabase,isLoading:i,success:o}):null]})]})})}}]),a}(s.a.Component),P=Object(p.b)((function(e){return{users:e.userReducer.users,qual:e.userReducer.qual,oldUser:e.userReducer.oldUser,isLoading:e.userReducer.isLoading,success:e.userReducer.success}}),(function(e){return{getUser:function(){return e((function(e){f.a.loading("Connecting to database ..."),e({type:"FETCH_USER_START"}),fetch("".concat(b,"get_users.php")).then((function(e){return e.json()})).then((function(t){for(var a=[],n=0;n<t.fm.length;n++){a.push(Object(j.a)(Object(j.a)({},t.fm[n]),{},{qualification:[]}));for(var s=0;s<t.qual.length;s++)t.fm[n].fm_id===t.qual[s].fm_id&&a[n].qualification.push(t.qual[s])}e({type:"FETCH_USER_SUCCESS",payload:a}),f.a.success("Database Connected")})).catch((function(t){e({type:"FETCH_USER_FAILED",payload:t}),f.a.error("Database Connecting Failed"),f.a.info(t.message,5e3)}))}))}}}))(k),H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,38)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))},V=a(16),Y=a(23),M=a(24),Q={users:[],isLoading:!1,error:null,message:null,oldUser:null,success:!1},J=Object(V.b)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_START":return Object.assign({},e,{error:null,oldUser:null,success:!1});case"ADD_USER_IN_DB_START":case"DELETE_USER":case"UPDATE_USER_START":return Object.assign({},e,{isLoading:!0,error:null,oldUser:null,success:!1});case"FETCH_USER_SUCCESS":return Object.assign({},e,{users:t.payload,isLoading:!1,error:null,oldUser:null,success:!1});case"ADD_USER_IN_DB_SUCCESS":case"DELETE_USER_SUCCESS":case"UPDATE_USER_SUCCESS":return Object.assign({},e,{isLoading:!1,message:t.payload,error:null,oldUser:null,success:!0});case"FETCH_USER_FAILED":case"ADD_USER_IN_DB_FAILED":case"DELTE_USER_FAILED":return Object.assign({},e,{isLoading:!1,error:t.payload,oldUser:null,success:!1});case"EDIT_USER":return Object.assign({},e,{oldUser:t.payload});case"CANCEL_UPDATE":return Object.assign({},e,{oldUser:null});default:return e}}}),W=Object(M.createLogger)(),X=Object(V.c)(J,Object(V.a)(Y.a,W));r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(p.a,{store:X,children:Object(g.jsx)(P,{})})}),document.getElementById("root")),H()},5:function(e,t,a){e.exports={titlebar:"titlebar_titlebar__1NbU1",searchBox_fakeInput:"titlebar_searchBox_fakeInput__1tYLQ",searchBox_inputWrapper:"titlebar_searchBox_inputWrapper__1nse0",searchBox_clearWrapper:"titlebar_searchBox_clearWrapper__2yNOw",searchBox_input:"titlebar_searchBox_input__nSNys",searchBox_clear:"titlebar_searchBox_clear__2jIS8",searchBox_clearInput:"titlebar_searchBox_clearInput__4-i_X",tooltip:"titlebar_tooltip__v_37A",tooltiptext:"titlebar_tooltiptext__1PjbA"}},9:function(e,t,a){e.exports={boxmodel:"Boxmodel_boxmodel__1zxCf",body:"Boxmodel_body__3V028",btn:"Boxmodel_btn__1rJEt",qual:"Boxmodel_qual__3xb06"}}},[[37,1,2]]]);
//# sourceMappingURL=main.86c65203.chunk.js.map